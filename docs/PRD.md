Next.js 기반 CMS 아키텍처 설계
병원 CMS - 상세 제품 요구사항 문서 (PRD)
1. 제품 개요
본 제품은 병원 웹사이트의 관리를 위한 콘텐츠 관리 시스템(CMS)입니다. 병원의 콘텐츠, 예약, 게시판 등을 효율적으로 관리할 수 있는 관리자 대시보드와 사용자가 이용할 수 있는 웹사이트 기능을 제공합니다.
2. 기능 요구사항
2.1 관리자 계정 관리
* 2.1.1 관리자 계정 생성/수정/삭제
    * 관리자 계정은 SUPER_ADMIN, ADMIN, EDITOR 세 가지 권한 레벨로 구분됩니다.
    * SUPER_ADMIN은 모든 관리자 계정을 관리할 수 있습니다.
    * 사용자 정보는 이름, 이메일, 비밀번호, 권한 레벨을 포함합니다.
* 2.1.2 관리자 인증
    * 이메일과 비밀번호를 통한 로그인 기능을 제공합니다.
    * 비밀번호는 암호화하여 저장됩니다.
    * 세션 기반의 인증 시스템을 구현합니다.
2.2 예약 관리 시스템
* 2.2.1 예약 생성 및 관리
    * 환자는 웹사이트를 통해 상담 예약을 신청할 수 있습니다.
    * 예약 시 필수 정보: 이름, 연락처, 예약 날짜 및 시간
    * 선택 정보: 이메일, 상담 내용
* 2.2.2 예약 상태 관리
    * 예약 상태는 대기중, 확정, 취소, 완료로 구분됩니다.
    * 관리자는 예약 상태를 변경할 수 있습니다.
    * 상태 변경 시 환자에게 알림을 제공합니다 (선택적).
* 2.2.3 예약 조회 및 필터링
    * 날짜, 상태, 환자 이름 등으로 예약을 필터링할 수 있습니다.
    * 캘린더 뷰와 리스트 뷰를 모두 제공합니다.
    * 페이지네이션을 통해 예약 목록을 효율적으로 조회할 수 있습니다.
2.3 팝업 관리 시스템
* 2.3.1 헤더 공지 팝업
    * 웹사이트 상단에 표시되는 텍스트 기반 공지 팝업입니다.
    * 제목, 내용, 기간 설정이 가능합니다.
    * 사용자가 닫을 수 있는 X 버튼이 있어야 합니다.
* 2.3.2 이미지 모달 팝업
    * 웹사이트 방문 시 모달 형태로 표시되는 이미지 팝업입니다.
    * 이미지 업로드, 크기 설정, 위치 설정이 가능합니다.
    * 닫기 버튼과 "오늘 하루 보지 않기" 옵션을 제공합니다.
* 2.3.3 팝업 기간 설정
    * 모든 팝업은 시작일과 종료일을 설정할 수 있습니다.
    * 설정된 기간 내에만 팝업이 표시됩니다.
    * 관리자는 기간과 상관없이 팝업을 활성화/비활성화할 수 있습니다.
2.4 게시판 관리 시스템
* 2.4.1 게시판 생성 및 관리
    * 관리자는 다양한 게시판을 생성, 수정, 삭제할 수 있습니다.
    * 게시판마다 이름, 설명, 순서를 설정할 수 있습니다.
    * 게시판은 활성화/비활성화할 수 있습니다.
* 2.4.2 게시물 관리
    * 각 게시판에 게시물을 작성, 수정, 삭제할 수 있습니다.
    * 게시물에는 제목, 내용, 이미지를 포함할 수 있습니다.
    * WYSIWYG 에디터를 통해 서식이 있는 내용 작성이 가능합니다.
* 2.4.3 이미지 업로드
    * 게시물에 이미지를 업로드할 수 있습니다.
    * 업로드된 이미지는 자동으로 WebP 형식으로 변환됩니다.
    * 이미지 최적화 및 리사이징이 자동으로 이루어집니다.
* 2.4.4 비포/애프터 이미지
    * 게시물에 비포/애프터 이미지를 등록할 수 있습니다.
    * 사용자 페이지에서 비포/애프터 이미지를 슬라이더로 비교할 수 있습니다.
2.5 페이지 콘텐츠 관리
* 2.5.1 JSON 기반 콘텐츠 구조
    * 웹사이트의 각 페이지 콘텐츠는 JSON 형태로 구조화됩니다.
    * 각 페이지별로 독립적인 JSON 구조를 가집니다.
    * 관리자는 JSON 에디터를 통해 콘텐츠를 수정할 수 있습니다.
* 2.5.2 텍스트 콘텐츠 관리
    * 페이지의 모든 텍스트 내용을 관리자가 수정할 수 있습니다.
    * 제목, 부제목, 단락, 버튼 텍스트 등을 관리할 수 있습니다.
* 2.5.3 이미지 콘텐츠 관리
    * 페이지에 사용되는 모든 이미지를 관리자가 변경할 수 있습니다.
    * 업로드된 이미지는 자동으로 WebP 형식으로 변환됩니다.
    * 이미지 메타데이터(alt 텍스트, 크기 등)를 관리할 수 있습니다.
* 2.5.4 콘텐츠 변경 이력 관리
    * 페이지 콘텐츠의 변경 이력을 저장합니다.
    * 관리자는 이전 버전의 콘텐츠를 조회하고 복원할 수 있습니다.
3. 기술적 요구사항
3.1 프론트엔드
* 3.1.1 사용자 인터페이스
    * 직관적이고 사용하기 쉬운 관리자 대시보드를 제공해야 합니다.
    * 반응형 디자인으로 모바일, 태블릿, 데스크톱에서 모두 사용 가능해야 합니다.
    * Shadcn UI 컴포넌트를 활용하여 일관된 디자인을 유지합니다.
* 3.1.2 이미지 업로드 및 최적화
    * 드래그 앤 드롭으로 이미지 업로드가 가능해야 합니다.
    * 이미지는 자동으로 WebP 형식으로 변환되어야 합니다.
    * 이미지 크기 최적화 및 리사이징이 자동으로 이루어져야 합니다.
* 3.1.3 JSON 에디터
    * 관리자가 JSON 구조를 시각적으로 편집할 수 있는 인터페이스를 제공해야 합니다.
    * 텍스트 필드, 이미지 필드, 구조적 필드(배열, 객체)를 직관적으로 편집할 수 있어야 합니다.
3.2 백엔드
* 3.2.1 API 설계
    * RESTful API를 제공하여 프론트엔드와 통신해야 합니다.
    * API는 JSON 형식으로 응답해야 합니다.
    * 적절한 HTTP 상태 코드를 사용하여 응답해야 합니다.
* 3.2.2 데이터베이스
    * PostgreSQL 데이터베이스를 사용합니다.
    * Prisma ORM을 통해 데이터베이스와 통신합니다.
    * 관계형 데이터 모델링을 통해 효율적인 데이터 구조를 구현합니다.
* 3.2.3 인증 및 권한
    * JWT 또는 세션 기반의 인증 시스템을 구현합니다.
    * 역할 기반 접근 제어(RBAC)를 통해 권한을 관리합니다.
    * API 엔드포인트별로 적절한 권한 체크를 수행합니다.
* 3.2.4 파일 저장소
    * 이미지 파일은 AWS S3 또는 Cloudinary에 저장합니다.
    * 이미지 변환 및 최적화는 서버 사이드 또는 스토리지 서비스의 기능을 활용합니다.
3.3 보안
* 3.3.1 데이터 보안
    * 민감한 정보(비밀번호 등)는 암호화하여 저장합니다.
    * HTTPS를 사용하여 통신합니다.
    * SQL 인젝션, XSS 등의 보안 취약점을 방지합니다.
* 3.3.2 접근 제어
    * 인증되지 않은 사용자의 관리자 페이지 접근을 차단합니다.
    * 권한이 없는 사용자의 기능 사용을 제한합니다.
    * API 엔드포인트별로 적절한 권한 검사를 수행합니다.
4. 상세 기능 명세
4.1 관리자 대시보드
* 4.1.1 대시보드 메인
    * 예약 현황, 최근 게시물, 활성 팝업 등 주요 정보를 한눈에 볼 수 있는 대시보드를 제공합니다.
    * 예약 통계, 게시판 활동 등을 차트로 시각화합니다.
* 4.1.2 사이드바 네비게이션
    * 예약 관리, 팝업 관리, 게시판 관리, 페이지 콘텐츠 관리, 관리자 계정 관리 등의 메뉴를 제공합니다.
    * 권한에 따라 접근 가능한 메뉴가 다르게 표시됩니다.
4.2 예약 관리
* 4.2.1 예약 목록
    * 필터: 날짜 범위, 상태, 환자 이름 등
    * 정렬: 예약 날짜, 생성일 등
    * 페이지네이션: 한 페이지에 10, 20, 50개씩 표시
* 4.2.2 예약 상세 정보
    * 환자 정보: 이름, 연락처, 이메일
    * 예약 정보: 날짜, 시간, 상태
    * 상담 내용 및 관리자 메모
* 4.2.3 예약 상태 변경
    * 상태 변경 버튼: 대기중 → 확정 → 완료 또는 취소
    * 상태 변경 시 확인 모달 표시
    * 변경 이력 기록
4.3 팝업 관리
* 4.3.1 팝업 목록
    * 팝업 유형, 제목, 기간, 활성화 상태 표시
    * 활성화/비활성화 토글 버튼
    * 수정, 삭제, 미리보기 버튼
* 4.3.2 헤더 팝업 설정
    * 제목 입력 필드
    * 내용 입력 필드 (리치 텍스트 에디터)
    * 기간 설정 (시작일, 종료일)
    * 활성화/비활성화 토글
* 4.3.3 이미지 팝업 설정
    * 제목 입력 필드
    * 이미지 업로드 (드래그 앤 드롭)
    * 이미지 크기 설정 (너비, 높이)
    * 팝업 위치 설정 (중앙, 좌측 상단, 우측 상단 등)
    * 기간 설정 (시작일, 종료일)
    * 활성화/비활성화 토글
4.4 게시판 관리
* 4.4.1 게시판 목록
    * 게시판 이름, 설명, 게시물 수, 활성화 상태 표시
    * 활성화/비활성화 토글 버튼
    * 게시판 순서 변경 기능 (드래그 앤 드롭)
    * 수정, 삭제 버튼
* 4.4.2 게시판 설정
    * 게시판 이름 입력 필드
    * 게시판 설명 입력 필드
    * 게시판 순서 설정
    * 활성화/비활성화 토글
* 4.4.3 게시물 목록
    * 게시물 제목, 작성일, 수정일 표시
    * 필터링 및 검색 기능
    * 페이지네이션
    * 수정, 삭제 버튼
* 4.4.4 게시물 작성/수정
    * 제목 입력 필드
    * 내용 입력 필드 (WYSIWYG 에디터)
    * 이미지 업로드 (드래그 앤 드롭)
    * 비포/애프터 이미지 설정
    * 저장, 취소 버튼
4.5 페이지 콘텐츠 관리
* 4.5.1 페이지 목록
    * 페이지 이름, 마지막 수정일, 수정자 표시
    * 수정 버튼
* 4.5.2 페이지 콘텐츠 편집
    * JSON 구조 시각화 에디터
    * 텍스트 필드 직접 편집
    * 이미지 필드 업로드/교체
    * 섹션 추가/삭제/순서 변경
    * 변경 사항 미리보기
    * 저장, 취소 버튼
* 4.5.3 콘텐츠 변경 이력
    * 변경 일시, 변경자, 변경 내용 요약 표시
    * 버전 비교 기능
    * 이전 버전으로 복원 기능
4.6 이미지 관리
* 4.6.1 이미지 업로드
    * 드래그 앤 드롭 또는 파일 선택 대화상자를 통한 업로드
    * 다중 이미지 업로드 지원
    * 업로드 진행 상태 표시
* 4.6.2 이미지 변환
    * 자동 WebP 변환
    * 이미지 크기 최적화
    * 썸네일 생성
* 4.6.3 이미지 메타데이터
    * 대체 텍스트(alt) 설정
    * 이미지 크기(너비, 높이) 설정
    * 이미지 설명 추가
5. 사용자 경험 요구사항
5.1 반응형 디자인
* 모바일, 태블릿, 데스크톱 등 다양한 디바이스에서 사용 가능해야 합니다.
* 화면 크기에 따라 레이아웃이 자동으로 조정되어야 합니다.
5.2 사용성
* 직관적인 UI/UX로 사용자가 쉽게 이해하고 사용할 수 있어야 합니다.
* 일관된 디자인 시스템을 적용하여 학습 곡선을 낮춰야 합니다.
* 빠른 로딩 시간과 부드러운 인터랙션을 제공해야 합니다.
5.3 접근성
* 웹 접근성 지침을 준수하여 모든 사용자가 이용할 수 있어야 합니다.
* 스크린 리더 호환성, 키보드 네비게이션 등을 지원해야 합니다.
* 충분한 색상 대비와 읽기 쉬운 폰트를 사용해야 합니다.
6. 기술 스택
6.1 프론트엔드
* Framework: Next.js 14 (App Router)
* 언어: TypeScript
* 상태 관리: React Query, Context API
* 스타일링: Tailwind CSS
* 컴포넌트 라이브러리: Shadcn UI
* 폼 관리: React Hook Form, Zod
6.2 백엔드
* API 라우트: Next.js API Routes
* 데이터베이스: Prisma ORM + PostgreSQL
* 인증: NextAuth.js
* 파일 저장소: AWS S3 / Cloudinary
6.3 개발 도구
* 패키지 관리: pnpm
* 코드 품질: ESLint, Prettier
* 테스트: Jest, React Testing Library
* CI/CD: GitHub Actions
7. 개발 일정
단계 1: 초기 설정 및 인증 구현 (1주)
* 프로젝트 설정
* 데이터베이스 스키마 구현
* 인증 시스템 구현
단계 2: 관리자 페이지 기본 기능 구현 (2주)
* 대시보드 구현
* 관리자 계정 관리 구현
* 기본 CRUD 기능 구현
단계 3: 예약 시스템 구현 (2주)
* 예약 생성/수정/삭제 기능
* 예약 상태 관리
* 예약 조회 및 필터링
단계 4: 팝업 관리 구현 (1.5주)
* 헤더 공지 팝업 생성/수정/삭제 기능
* 이미지 모달 팝업 생성/수정/삭제 기능
* 팝업 사이즈 및 위치 설정 기능
* 기간 설정 기능
* 사용자 페이지 팝업 표시
단계 5: 게시판 및 게시물 관리 구현 (2주)
* 게시판 CRUD 기능
* 게시물 CRUD 기능
* 이미지 업로드 및 관리
* 비포/애프터 이미지 기능
단계 6: 페이지 콘텐츠 관리 구현 (2.5주)
* JSON 기반 콘텐츠 구조 구현
* 콘텐츠 에디터 구현
* 이미지 업로드 및 WebP 변환 기능
* 콘텐츠 변경 이력 관리
단계 7: 테스트 및 배포 (1주)
* 통합 테스트
* 버그 수정
* 배포 및 모니터링 설정
8. 성공 기준
* 모든 요구 기능이 정상적으로 작동합니다.
* 관리자가 직관적으로 콘텐츠를 관리할 수 있습니다.
* 사용자가 쉽게 예약 및 게시판을 이용할 수 있습니다.
* 웹사이트 성능이 최적화되어 빠르게 로딩됩니다.
* 모든 브라우저와 디바이스에서 일관되게 작동합니다.
* 데이터의 무결성과 보안이 유지됩니다.
9. 고려사항 및 제약 조건
* 브라우저 호환성: 최신 버전의 Chrome, Firefox, Safari, Edge를 지원해야 합니다.
* 성능 요구사항: 페이지 로딩 시간은 3초 이내여야 합니다.
* 보안 요구사항: OWASP Top 10 보안 취약점을 방지해야 합니다.
* 확장성: 향후 기능 추가 및 확장이 용이해야 합니다.
* 유지보수성: 코드는 명확하게 문서화되고 모듈화되어야 합니다.
10. 관련 문서
* 디자인 시스템 가이드
* API 명세 문서
* 데이터베이스 스키마 다이어그램
* 사용자 흐름 다이어그램
